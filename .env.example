# ===========================================
# 主流AI提供商配置
# ===========================================

# OpenAI 配置
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-5
OPENAI_FORMAT=openai

# Claude 配置
CLAUDE_API_KEY=your_claude_api_key_here
CLAUDE_BASE_URL=https://api.anthropic.com/v1
CLAUDE_MODEL=claude-4-sonnet
CLAUDE_FORMAT=claude

# Gemini 配置
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_BASE_URL=https://generativelanguage.googleapis.com/v1beta
GEMINI_MODEL=gemini-2.5-pro
GEMINI_FORMAT=gemini

# Grok 配置 (可使用openai格式的接口)
GROK_API_KEY=your_grok_api_key_here
GROK_BASE_URL=https://api.x.ai/v1
GROK_MODEL=grok-beta
GROK_FORMAT=openai

# ===========================================
# 自定义AI提供商配置示例
# ===========================================

# 示例1: 使用Azure OpenAI
# CUSTOM_PROVIDER_AZURE_API_KEY=your_azure_openai_key
# CUSTOM_PROVIDER_AZURE_BASE_URL=https://your-resource.openai.azure.com/openai/deployments/gpt-4/
# CUSTOM_PROVIDER_AZURE_MODEL=gpt-4
# CUSTOM_PROVIDER_AZURE_FORMAT=openai

# 示例2: 使用本地大模型服务 (如Ollama)
# CUSTOM_PROVIDER_OLLAMA_API_KEY=dummy_key
# CUSTOM_PROVIDER_OLLAMA_BASE_URL=http://localhost:11434/v1
# CUSTOM_PROVIDER_OLLAMA_MODEL=llama2
# CUSTOM_PROVIDER_OLLAMA_FORMAT=openai

# 示例3: 使用其他兼容OpenAI API的服务
# CUSTOM_PROVIDER_DEEPSEEK_API_KEY=your_deepseek_key
# CUSTOM_PROVIDER_DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
# CUSTOM_PROVIDER_DEEPSEEK_MODEL=deepseek-chat
# CUSTOM_PROVIDER_DEEPSEEK_FORMAT=openai

# 示例4: 使用Moonshot AI
# CUSTOM_PROVIDER_MOONSHOT_API_KEY=your_moonshot_key
# CUSTOM_PROVIDER_MOONSHOT_BASE_URL=https://api.moonshot.cn/v1
# CUSTOM_PROVIDER_MOONSHOT_MODEL=moonshot-v1-8k
# CUSTOM_PROVIDER_MOONSHOT_FORMAT=openai

# ===========================================
# 服务器配置
# ===========================================

PORT=3000
NODE_ENV=development

# ===========================================
# 上下文管理配置
# ===========================================

# 最大上下文长度
MAX_CONTEXT_LENGTH=8000
# 压缩比例 (0.1-1.0)
COMPRESSION_RATIO=0.3
# 压缩使用的AI提供商 (可选: openai, claude, gemini, grok，默认为gemini)
COMPRESSION_PROVIDER=gemini

# ===========================================
# 数据库配置 (可选)
# ===========================================

# 知识库存储位置
DATABASE_URL=sqlite://./data/knowledge.db

# ===========================================
# AI重试配置环境变量
# ===========================================

# 最大重试次数 (默认: 5)
RETRY_MAX_ATTEMPTS=5

# 固定延迟时间，单位毫秒 (默认: 2000 = 2秒)
RETRY_BASE_DELAY=2000

# 最大延迟时间，单位毫秒 (默认: 2000 = 2秒，固定延迟不使用此参数)
RETRY_MAX_DELAY=2000

# 指数退避因子 (默认: 1，不使用指数退避)
RETRY_BACKOFF_FACTOR=1

# 可重试的错误类型，逗号分隔 (默认如下)
RETRY_ERRORS=ECONNABORTED,ENOTFOUND,ECONNREFUSED,ECONNRESET,ETIMEDOUT,Network Error,500,502,503,504,429

# AI请求超时时间，单位毫秒 (默认: 300000 = 5分钟)
AI_REQUEST_TIMEOUT=300000

# 是否启用流式请求回退到非流式 (默认: true)
AI_STREAM_FALLBACK=true